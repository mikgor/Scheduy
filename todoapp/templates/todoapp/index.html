{% load static %}
<!DOCTYPE html>
<html>
<head>
	<title>MikGor App</title>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<link rel="stylesheet" href="{% static 'todoapp/style.css' %}"/>
</head>
<body>
   <header><h1>ToDo App</h1></header>

   <h3>New task:</h3>

   <a href="{% url 'TaskCreate' %}" ><input type="button" class="btn-add" value="Add task" id="addTaskBtn"></a>
	<a href="{% url 'TaskGroupCreate' %}" ><input type="button" class="btn-add" value="Add task group" id="addTaskGroupBtn"></a>
   <div id="tasks">
   {% if taskgroup_list %}
   <h1>Tasks</h1>

    {% for group in taskgroup_list %}
	 <div class="group">
 		<div class="groupTitle" style="background-color: {{group.color}};">
			<div class="taskGroupColumnFirst">{{ group.name }}</div>
			<div class="taskGroupColumn"><div class="groupBtns"><a class="fas fa-edit"  href="{% url 'TaskGroupUpdate' group.id %}"> Edit</a> <a class="fas fa-trash-alt"  href="{% url 'TaskGroupDelete' group.id %}"> Delete</a></div></div>
		</div>
	 {% for task in task_list %}
	 	{% if task.group.id == group.id %}
		<div class="task">
			<div class="taskColumnFirst">
				<div class="taskTitle">{{ task.name }}</div>
				<div class="taskDeadline">{{ task.deadline }}
					{% if task.isExpired %}
					<span class="taskTimeRemainingR">{{ task.remainingTime }}</span>
					{% else %}
					<span class="taskTimeRemainingG">{{ task.remainingTime }}</span>
					{% endif %}
				</div>
				<div class="taskDetails">{{ task.details }}</div>
			</div>
			<div class="taskColumn">
				<input id="{{ task.id }}" type="checkbox" {% if task.is_done %} checked {% endif %} onclick="{location.replace('{% url 'IsDoneUpdate' task.id %}')}">
  				<label for="{{ task.id }}"></label>
			</div>
			<div class="taskColumn">
				<div><a class="fas fa-edit"  href="{% url 'TaskUpdate' task.id %}"> Edit</a></div><td><a class="fas fa-trash-alt"  href="{% url 'TaskDelete' task.id %}"> Delete</a>
			</div>
		</div>
		{% endif %}
	 {% endfor %}
 </div>
	 {% endfor %}
 </div>
{% else %}
    <p>No tasks.</p>
{% endif %}
<footer>
  <p>ToDo @ 2018</p>
</footer>
</body>
</html>
